{"uuid":"91b46be4-1083-4254-bb90-063e47504cbd","historyId":"e0e4d448dd293aebc632121ec82c800c","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.e2e._2_7_DivideCheckWith4UsersPartPayAndFull]/[method:chooseDishesForPay()]","testCaseName":"4. Выбираем рандомно оставшиеся блюда для оплаты, проверяем все суммы, в том числе ожидаемых","fullName":"tapper.tests.e2e._2_7_DivideCheckWith4UsersPartPayAndFull.chooseDishesForPay","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.e2e._2_7_DivideCheckWith4UsersPartPayAndFull]/[method:chooseDishesForPay()]"},{"name":"feature","value":"keeper - частичная оплата когда разделили счёт - рандомные поз без скидки - чай+сбор - карта - отзыв"},{"name":"epic","value":"E2E - тесты (полные)"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"19216@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(17)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.e2e._2_7_DivideCheckWith4UsersPartPayAndFull"},{"name":"testClass","value":"tapper.tests.e2e._2_7_DivideCheckWith4UsersPartPayAndFull"},{"name":"testMethod","value":"chooseDishesForPay"},{"name":"suite","value":"keeper - частичная оплата когда разделили счёт - рандомные поз без скидки - чай+сбор - карта - отзыв"}],"links":[],"name":"4. Выбираем рандомно оставшиеся блюда для оплаты, проверяем все суммы, в том числе ожидаемых","status":"passed","stage":"finished","description":"","steps":[{"name":"Выбираем рандомное число блюд (1), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Выбираем рандомное число блюд (1) и считаем их сумму","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (2000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"2000"}],"start":1668768047334,"stop":1668768049348},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[{"name":"$(\".divide__check span.slider\") should be([visible, 5 s.])","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049382,"stop":1668768049392}],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"slider\" data-v-75978ed6></span>"},{"name":"time","value":"5"}],"start":1668768049382,"stop":1668768049392},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[{"name":"$(\".divide__check span.slider\") should be(visible)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049414,"stop":1668768049423},{"name":"$(\".divide__check span.slider\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049423,"stop":1668768049472}],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"slider\" data-v-75978ed6></span>"}],"start":1668768049414,"stop":1668768049472}],"attachments":[],"parameters":[],"start":1668768047334,"stop":1668768049472},{"name":"Считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049472,"stop":1668768049478},{"name":"Генерация рандомного значения от 1 до 18","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"18"}],"start":1668768049486,"stop":1668768049486},{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//input[14]\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049486,"stop":1668768049499},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//*[@class='sum'][14]\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049533,"stop":1668768049545}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-4926b37a>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768049533,"stop":1668768049545},{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//*[@class='dish__checkbox-content'][14]\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049545,"stop":1668768049561},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//*[@class='dish__checkbox-content'][14]\") scroll into view(false)","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//*[@class='dish__checkbox-content'][14]\") get wrapped element()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049598,"stop":1668768049603}],"attachments":[],"parameters":[],"start":1668768049598,"stop":1668768049605},{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//*[@class='dish__checkbox-content'][14]\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049605,"stop":1668768049645}],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"dish__checkbox-content\" data-v-4926b37a>Барное пиво</div>"}],"start":1668768049598,"stop":1668768049645},{"name":"$(\"By.xpath: //*[@class='dishList__item active'][not(@class='paid') and not(@class='disabled')]//input[14]\") should be([checked, 10 s.])","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049645,"stop":1668768049904},{"name":"Принудительно раскрываем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049904,"stop":1668768049907}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"1"}],"start":1668768049472,"stop":1668768049907}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1668768047334,"stop":1668768049907},{"name":"Проверяем сумму выбранных позиций заказа с разделенными позициями с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[0]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049911,"stop":1668768049923},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[1]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049923,"stop":1668768049935},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[2]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049935,"stop":1668768049947},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[3]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049947,"stop":1668768049958},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[4]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049958,"stop":1668768049969},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[5]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049969,"stop":1668768049981},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[6]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049981,"stop":1668768049992},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[7]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768049992,"stop":1668768050003},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[8]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050003,"stop":1668768050014},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[9]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050014,"stop":1668768050025},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[10]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050025,"stop":1668768050036},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[11]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050036,"stop":1668768050048},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[12]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050048,"stop":1668768050060},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[13]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050060,"stop":1668768050071},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[14]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050071,"stop":1668768050083},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[14]/.sum\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050109,"stop":1668768050119}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-4926b37a>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768050109,"stop":1668768050119},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[14]/.dish__checkbox-text\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050119,"stop":1668768050136},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[15]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050136,"stop":1668768050148},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[16]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050148,"stop":1668768050160},{"name":"$(\".dishList__list li [class='dishList__item active'].snapshot(18 elements)[17]/input+span\") get css value(background-image)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050160,"stop":1668768050171},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='check__tips-heading'][text()='Отмеченные позиции:']/following-sibling::span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050203,"stop":1668768050213}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-03687ea8>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768050203,"stop":1668768050213}],"attachments":[],"parameters":[],"start":1668768049907,"stop":1668768050213},{"name":"Проверяем сумму за сами блюда с 'Итого к оплате' и счётчиком в иконке кошелька без СБ и чаевых","status":"passed","stage":"finished","steps":[{"name":"Отключаем чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768050213,"stop":1668768051220},{"name":"$(\".payment__conditions:first-of-type\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768051220,"stop":1668768051225},{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768051225,"stop":1668768051233},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1668768051233,"stop":1668768051240}],"attachments":[],"parameters":[],"start":1668768050213,"stop":1668768051240},{"name":"Выставляем чаевые на 0, проверяем что чаевые не участвуют в общей сумме и СБ","status":"passed","stage":"finished","steps":[{"name":"$(\".custom-input input\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768051240,"stop":1668768051244},{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768051244,"stop":1668768052249},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][text()=' 0% ']\") should be(visible)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052282,"stop":1668768052292},{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][text()=' 0% ']\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052292,"stop":1668768052333}],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"tips__list-item\" data-v-9d9e02de>0%</li>"}],"start":1668768052281,"stop":1668768052333},{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][text()=' 0% ']\") should have([match attribute class~/tips__list-item active/, 4 s.])","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052333,"stop":1668768052345},{"name":"Проверка логики суммы сервисного сбора с общей суммой и чаевыми","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052345,"stop":1668768052348},{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052348,"stop":1668768052355},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052355,"stop":1668768052358},{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052358,"stop":1668768052365},{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768052365,"stop":1668768053372},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1668768053372,"stop":1668768053378}],"attachments":[],"parameters":[],"start":1668768052355,"stop":1668768053378},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.3249999999999997"}],"start":1668768053378,"stop":1668768053378},{"name":"$(\".tips\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053378,"stop":1668768053383},{"name":"$(\".custom-input input\") get value()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053383,"stop":1668768053395},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"0.0"}],"start":1668768053395,"stop":1668768053395},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.32"}],"start":1668768053395,"stop":1668768053395},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__totalPay-heading+span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053426,"stop":1668768053435}],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-03687ea8>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053426,"stop":1668768053435},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".priceCard>span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053465,"stop":1668768053475}],"attachments":[],"parameters":[{"name":"selector","value":"<span>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053465,"stop":1668768053475},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.3249999999999997"}],"start":1668768053475,"stop":1668768053475}],"attachments":[],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1668768052345,"stop":1668768053475},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][text()=' 0% ']\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053497,"stop":1668768053505}],"attachments":[],"parameters":[{"name":"selector","value":"<li class=\"tips__list-item\" data-v-9d9e02de>0%</li>"},{"name":"regex","value":"\\D+"}],"start":1668768053497,"stop":1668768053505},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__tips .check__tips-sum\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053535,"stop":1668768053544}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-03687ea8>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053535,"stop":1668768053544},{"name":"$(\".custom-input input\") get value()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053544,"stop":1668768053553},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__totalPay-heading+span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053575,"stop":1668768053585}],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-03687ea8>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053575,"stop":1668768053585},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".priceCard>span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053606,"stop":1668768053616}],"attachments":[],"parameters":[{"name":"selector","value":"<span>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053606,"stop":1668768053616}],"attachments":[],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1668768051240,"stop":1668768053616}],"attachments":[],"parameters":[{"name":"cleanTotalSum","value":"155.0"}],"start":1668768050213,"stop":1668768053616},{"name":"Проверяем что сумма всех блюд совпадает с итоговой без чаевых и СБ","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (2сек.)","status":"passed","stage":"finished","steps":[{"name":"$(\".check__totalPay-heading+span\") should be([visible, 2 s.])","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053637,"stop":1668768053646}],"attachments":[],"parameters":[{"name":"element","value":"<span data-v-03687ea8>157.33 ₽</span>"},{"name":"time","value":"2"}],"start":1668768053637,"stop":1668768053646},{"name":"Сбрасываем чаевые и СБ чтобы получить чистую сумму за позиции","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053646,"stop":1668768053652},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053683,"stop":1668768053692}],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper(2.325\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1668768053683,"stop":1668768053692},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.325"}],"start":1668768053692,"stop":1668768053692},{"name":"$(\".custom-input input\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053692,"stop":1668768053695},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check .check__tips .check__tips-sum\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053717,"stop":1668768053728}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-03687ea8>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053717,"stop":1668768053728},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__totalPay-heading+span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053751,"stop":1668768053760}],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-03687ea8>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768053751,"stop":1668768053760}],"attachments":[],"parameters":[],"start":1668768053646,"stop":1668768053760}],"attachments":[],"parameters":[{"name":"totalSumByDishesInOrder","value":"155.0"}],"start":1668768053616,"stop":1668768053760},{"name":"Проверяем что сумма 'Итого к оплате' совпадает с суммой счетчика в иконке кошелька","status":"passed","stage":"finished","steps":[{"name":"$(\".menu\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053760,"stop":1668768053763}],"attachments":[],"parameters":[],"start":1668768053760,"stop":1668768053763},{"name":"Включаем рандомные чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053763,"stop":1668768053766},{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053766,"stop":1668768053772}],"attachments":[],"parameters":[],"start":1668768053763,"stop":1668768053772},{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[{"name":"$(\".tips__sum-btn[type='reset']\") should be(visible)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053802,"stop":1668768053811},{"name":"$(\".tips__sum-btn[type='reset']\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053811,"stop":1668768053843}],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"tips__sum-btn\" data-v-9d9e02de type=\"reset\"></button>"}],"start":1668768053802,"stop":1668768053843}],"attachments":[],"parameters":[],"start":1668768053772,"stop":1668768053848}],"attachments":[],"parameters":[],"start":1668768053763,"stop":1668768053848}],"attachments":[],"parameters":[{"name":"cleanTotalSum","value":"155.0"}],"start":1668768050213,"stop":1668768053848},{"name":"Проверяем что все варианты чаевых корректны","status":"passed","stage":"finished","steps":[{"name":"Проверяем что процент установленных по умолчанию чаевых рассчитывается корректно с СБ и без","status":"passed","stage":"finished","steps":[{"name":"$(\".tips__sum input\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053848,"stop":1668768053851},{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768053851,"stop":1668768054857},{"name":"$(\".payment__conditions:first-of-type\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054857,"stop":1668768054861},{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054861,"stop":1668768054868},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1668768054868,"stop":1668768054874}],"attachments":[],"parameters":[],"start":1668768053851,"stop":1668768054874},{"name":"Элемент присутствует на странице в ходе длительной загрузки (15сек.)","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='tips__list-item active']\") should be([visible, 15 s.])","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054899,"stop":1668768054909}],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"tips__list-item active\" data-v-9d9e02de>0%</li>"},{"name":"time","value":"15"}],"start":1668768054898,"stop":1668768054909},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='tips__list-item active']\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054932,"stop":1668768054943}],"attachments":[],"parameters":[{"name":"selector","value":"<li class=\"tips__list-item active\" data-v-9d9e02de>0%</li>"},{"name":"regex","value":"\\D+"}],"start":1668768054932,"stop":1668768054943},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__totalPay-heading+span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054965,"stop":1668768054973}],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-03687ea8>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768054965,"stop":1668768054973}],"attachments":[],"parameters":[{"name":"totalSumWithoutTips","value":"155.0"}],"start":1668768053848,"stop":1668768054974},{"name":"Проверяем что разные проценты чаевых рассчитываются корректно во всех полях и в суммах вместе с СБ не разделяя счёт","status":"passed","stage":"finished","steps":[{"name":"Прощёлкиваем все чаевые и проверяем что суммы корректны и сходятся. Добавляем лог в аллюр","status":"passed","stage":"finished","steps":[{"name":"Принудительно раскрываем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054974,"stop":1668768054975},{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768054975,"stop":1668768055981},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type\") exists()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768055986,"stop":1668768055989},{"name":"$(\".payment__conditions:first-of-type input\") is selected()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768055989,"stop":1668768055996},{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768055996,"stop":1668768057006},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1668768057006,"stop":1668768057011}],"attachments":[],"parameters":[],"start":1668768055986,"stop":1668768057011},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][not(@class='tips__list-item disabled')].snapshot(1 elements)[0]\") should be(visible)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057031,"stop":1668768057038},{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][not(@class='tips__list-item disabled')].snapshot(1 elements)[0]\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057038,"stop":1668768057057}],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"tips__list-item active\" data-v-9d9e02de>0%</li>"}],"start":1668768057031,"stop":1668768057057},{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][not(@class='tips__list-item disabled')].snapshot(1 elements)[0]\") should have([match attribute class~/tips__list-item active/, 2 s.])","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057057,"stop":1668768057063},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".payment__conditions:first-of-type\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057086,"stop":1668768057095}],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper(2.325\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1668768057086,"stop":1668768057095},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.325"}],"start":1668768057095,"stop":1668768057095},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[contains(@class,'tips__list-item')][not(@class='tips__list-item disabled')].snapshot(1 elements)[0]\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057115,"stop":1668768057120}],"attachments":[],"parameters":[{"name":"selector","value":"<li class=\"tips__list-item active\" data-v-9d9e02de>0%</li>"},{"name":"regex","value":"\\D+"}],"start":1668768057115,"stop":1668768057120},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__totalPay-heading+span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057151,"stop":1668768057160}],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-03687ea8>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768057151,"stop":1668768057160},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\".check__tips .check__tips-sum\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057184,"stop":1668768057193}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-03687ea8>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768057184,"stop":1668768057193},{"name":"$(\".custom-input input\") get value()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057193,"stop":1668768057203},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[{"name":"$(\".tips__sum-btn[type='reset']\") should be(visible)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057224,"stop":1668768057234},{"name":"$(\".tips__sum-btn[type='reset']\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057234,"stop":1668768057257}],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"tips__sum-btn\" data-v-9d9e02de type=\"reset\"></button>"}],"start":1668768057224,"stop":1668768057257}],"attachments":[{"name":"Подсчёт сумм","source":"7ef814c2-3d4b-4280-b57b-18259d088ff8-attachment.txt","type":"text/plain"}],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1668768054974,"stop":1668768057258}],"attachments":[],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1668768054974,"stop":1668768057258}],"attachments":[],"parameters":[{"name":"cleanTotalSum","value":"155.0"}],"start":1668768053848,"stop":1668768057258}],"attachments":[],"parameters":[],"start":1668768049907,"stop":1668768057258},{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[{"name":"$(\".tips__sum-btn[type='reset']\") should be(visible)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057280,"stop":1668768057290},{"name":"$(\".tips__sum-btn[type='reset']\") click()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057290,"stop":1668768057312}],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"tips__sum-btn\" data-v-9d9e02de type=\"reset\"></button>"}],"start":1668768057280,"stop":1668768057312}],"attachments":[],"parameters":[],"start":1668768057258,"stop":1668768057317}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1668768047334,"stop":1668768057317},{"name":"Проверка что сумма 'Другой пользователь' совпадает с суммой оплаченных позиций","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='check__tips-heading'][text()='Другой пользователь:']/following-sibling::span\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057350,"stop":1668768057360}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-03687ea8>- 310 ₽</span>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1668768057350,"stop":1668768057360},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='dishList__list']//*[contains(@class,'disabled') or contains(@class,'paid')].snapshot(2 elements)[0]/.sum\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057400,"stop":1668768057409}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-4926b37a>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768057400,"stop":1668768057409},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[{"name":"$(\"By.xpath: //*[@class='dishList__list']//*[contains(@class,'disabled') or contains(@class,'paid')].snapshot(2 elements)[1]/.sum\") get text()","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1668768057443,"stop":1668768057452}],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-4926b37a>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1668768057443,"stop":1668768057452}],"attachments":[],"parameters":[],"start":1668768057317,"stop":1668768057452}],"attachments":[],"parameters":[],"start":1668768047334,"stop":1668768057452}