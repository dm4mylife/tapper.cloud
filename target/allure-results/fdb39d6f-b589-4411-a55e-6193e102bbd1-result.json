{"uuid":"fdb39d6f-b589-4411-a55e-6193e102bbd1","historyId":"688ca545875e83e9e861714c814ba31c","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:chooseDishesAndCheckAfterDivided()]","testCaseName":"1.2. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","fullName":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.chooseDishesAndCheckAfterDivided","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:chooseDishesAndCheckAfterDivided()]"},{"name":"feature","value":"Полная оплата"},{"name":"story","value":"Комплекс оплат для проверки на странице истории операций в админке"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"14284@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(17)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testMethod","value":"chooseDishesAndCheckAfterDivided"},{"name":"suite","value":"Частичная и полная оплата с кастомными чаевыми, обычные позиции"}],"links":[],"name":"1.2. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","status":"passed","stage":"finished","description":"","steps":[{"name":"Выбираем рандомное число блюд (1), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (1000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"1000"}],"start":1671607477889,"stop":1671607478899},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"},{"name":"time","value":"5"}],"start":1671607478948,"stop":1671607478964},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"}],"start":1671607479003,"stop":1671607479076}],"attachments":[],"parameters":[],"start":1671607477889,"stop":1671607479076},{"name":"Выбираем определенное число блюд и считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607479077,"stop":1671607479081},{"name":"Генерация рандомного значения от 1 до 17","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"17"}],"start":1671607479110,"stop":1671607479111},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671607479181,"stop":1671607479198},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"orderItem__name\" data-v-b41d8f6a>Барное пиво</div>"}],"start":1671607479265,"stop":1671607479326},{"name":"Принудительно раскрываем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607479605,"stop":1671607479613}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"1"}],"start":1671607479077,"stop":1671607479613},{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671607479742,"stop":1671607479757},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671607480030,"stop":1671607480045}],"attachments":[],"parameters":[],"start":1671607479614,"stop":1671607480047},{"name":"Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', все опции чаевых корректны с\\без СБ, СБ считается по формуле корректно","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>49 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671607480126,"stop":1671607480142}],"attachments":[],"parameters":[],"start":1671607480047,"stop":1671607480143},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607480143,"stop":1671607481156},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (4.78₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671607481219,"stop":1671607481233},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"4.78"}],"start":1671607481233,"stop":1671607481233}],"attachments":[],"parameters":[],"start":1671607480143,"stop":1671607481233},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"},{"name":"currentTips","value":"49.0"},{"name":"currentSC","value":"4.78"}],"start":1671607481233,"stop":1671607481233},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>208.78 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671607481278,"stop":1671607481292},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>208.78 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671607481335,"stop":1671607481348}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671607480047,"stop":1671607481348},{"name":"Проверяем все варианты чаевых с общей суммой с сб","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"waiterTipsPercent\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"}],"start":1671607481392,"stop":1671607481436},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671607481494,"stop":1671607481508},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"waiterTipsPercent active\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"},{"name":"regex","value":"\\D+"}],"start":1671607481540,"stop":1671607481549},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671607481590,"stop":1671607481606},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>157.33 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671607481642,"stop":1671607481656},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607481656,"stop":1671607482672},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671607482723,"stop":1671607482739},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.33"}],"start":1671607482739,"stop":1671607482739}],"attachments":[],"parameters":[],"start":1671607481656,"stop":1671607482739}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671607481348,"stop":1671607482739},{"name":"Проверяем все варианты чаевых с общей суммой без сб","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607482740,"stop":1671607483755},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671607483803,"stop":1671607483851}],"attachments":[],"parameters":[],"start":1671607482739,"stop":1671607483851}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671607482739,"stop":1671607483857},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607483871,"stop":1671607484884},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671607484915,"stop":1671607484955}],"attachments":[],"parameters":[],"start":1671607483857,"stop":1671607484955}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671607483857,"stop":1671607484960}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671607480047,"stop":1671607484960}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1671607477889,"stop":1671607484960},{"name":"Включаем рандомные чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607484960,"stop":1671607485974},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"baseButtonClose\" data-v-5074aea5 data-v-b7b59af2 type=\"button\"></button>"}],"start":1671607486015,"stop":1671607486059}],"attachments":[],"parameters":[],"start":1671607484960,"stop":1671607486064},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671607486064,"stop":1671607486078}],"attachments":[],"parameters":[],"start":1671607484960,"stop":1671607486078},{"name":"Генерация рандомного значения от 100 до 1000","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"100"},{"name":"max","value":"1000"}],"start":1671607486078,"stop":1671607486078},{"name":"Ввод кастомных чаевых","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"264\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"}],"start":1671607486167,"stop":1671607486214},{"name":"Ввод данных 342 с задержкой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"264\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"},{"name":"text","value":"342"}],"start":1671607486287,"stop":1671607486524}],"attachments":[],"parameters":[{"name":"value","value":"342"}],"start":1671607486078,"stop":1671607486553}],"attachments":[],"parameters":[],"start":1671607477888,"stop":1671607486553}