{"uuid":"95c25c86-150c-44f0-b15c-bb86f9065c66","historyId":"2c7ea2d8f47f837f86762e4afbfd0fb2","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_3_VerifiedPartNoCardWithScTest]/[method:chooseDishesAndCheckAfterDivided()]","testCaseName":"3. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","fullName":"tapper.tests.keeper_e2e._6_waiter._6_3_VerifiedPartNoCardWithScTest.chooseDishesAndCheckAfterDivided","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_3_VerifiedPartNoCardWithScTest]/[method:chooseDishesAndCheckAfterDivided()]"},{"name":"story","value":"Официант верифицирован, без привязанной карты, частичная оплата  +СБ"},{"name":"feature","value":"Официант"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._6_waiter._6_3_VerifiedPartNoCardWithScTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._6_waiter._6_3_VerifiedPartNoCardWithScTest"},{"name":"testMethod","value":"chooseDishesAndCheckAfterDivided"},{"name":"suite","value":"tapper.tests.keeper_e2e._6_waiter._6_3_VerifiedPartNoCardWithScTest"}],"links":[],"name":"3. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","status":"passed","stage":"finished","description":"","steps":[{"name":"Выбираем рандомное число блюд (3), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (2000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"2000"}],"start":1669985687035,"stop":1669985689039},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"slider\" data-v-63689a2c></span>"},{"name":"time","value":"5"}],"start":1669985689073,"stop":1669985689084},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"slider\" data-v-63689a2c></span>"}],"start":1669985689106,"stop":1669985689169}],"attachments":[],"parameters":[],"start":1669985687035,"stop":1669985689169},{"name":"Выбираем определенное число блюд и считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985689169,"stop":1669985689172},{"name":"Генерация рандомного значения от 1 до 10","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"10"}],"start":1669985689188,"stop":1669985689188},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985689238,"stop":1669985689249},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"dish__checkbox-content\" data-v-e5a69182>Барное пиво</div>"}],"start":1669985689301,"stop":1669985689350},{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (300 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"300"}],"start":1669985689350,"stop":1669985689664},{"name":"Генерация рандомного значения от 1 до 10","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"10"}],"start":1669985689676,"stop":1669985689676},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985689725,"stop":1669985689736},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"dish__checkbox-content\" data-v-e5a69182>Барное пиво</div>"}],"start":1669985689782,"stop":1669985689828},{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (300 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"300"}],"start":1669985689828,"stop":1669985690137},{"name":"Генерация рандомного значения от 1 до 10","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"10"}],"start":1669985690150,"stop":1669985690150},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985690193,"stop":1669985690204},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"dish__checkbox-content\" data-v-e5a69182>Барное пиво</div>"}],"start":1669985690250,"stop":1669985690295},{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (300 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"300"}],"start":1669985690295,"stop":1669985690598},{"name":"Принудительно раскрываем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985690605,"stop":1669985690609}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"3"}],"start":1669985689169,"stop":1669985690609},{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985690654,"stop":1669985690665},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985690719,"stop":1669985690730},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985690835,"stop":1669985690845},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-c8fe04fa>465 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985690932,"stop":1669985690946}],"attachments":[],"parameters":[],"start":1669985690609,"stop":1669985690946},{"name":"Официант верифицирован, но без карты. Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', чаевые отключены, СБ считается по формуле корректно и включено","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985690946,"stop":1669985690954},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985690954,"stop":1669985691967},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (6.975\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669985692021,"stop":1669985692032},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"6.975"}],"start":1669985692032,"stop":1669985692032}],"attachments":[],"parameters":[],"start":1669985690954,"stop":1669985692032},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"465.0"},{"name":"currentTips","value":"0.0"},{"name":"currentSC","value":"6.97"}],"start":1669985692032,"stop":1669985692032},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>471.97 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985692067,"stop":1669985692077},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span>471.97 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985692111,"stop":1669985692120}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"465.0"}],"start":1669985690946,"stop":1669985692120},{"name":"Чаевые не должны отображаться у верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985692162,"stop":1669985692172},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips__waiter\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985692210,"stop":1669985692221},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check .check__tips .check__tips-sum\"}"}],"start":1669985692228,"stop":1669985692232},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".custom-input input\"}"}],"start":1669985692237,"stop":1669985692241},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@class='tips__list-item active']\"}"}],"start":1669985692249,"stop":1669985692254},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips__sum-btn[type='reset']\"}"}],"start":1669985692261,"stop":1669985692265}],"attachments":[],"parameters":[],"start":1669985692120,"stop":1669985692272},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985692272,"stop":1669985692282}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"465.0"}],"start":1669985692272,"stop":1669985692289}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"465.0"}],"start":1669985690946,"stop":1669985692289}],"attachments":[],"parameters":[{"name":"amountDishes","value":"3"}],"start":1669985687035,"stop":1669985692289},{"name":"Чаевые не должны отображаться у верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985692315,"stop":1669985692324},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips__waiter\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985692351,"stop":1669985692362},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check .check__tips .check__tips-sum\"}"}],"start":1669985692366,"stop":1669985692370},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".custom-input input\"}"}],"start":1669985692374,"stop":1669985692378},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@class='tips__list-item active']\"}"}],"start":1669985692383,"stop":1669985692387},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips__sum-btn[type='reset']\"}"}],"start":1669985692390,"stop":1669985692395}],"attachments":[],"parameters":[],"start":1669985692289,"stop":1669985692399},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985692400,"stop":1669985692410}],"attachments":[],"parameters":[],"start":1669985687035,"stop":1669985692410}