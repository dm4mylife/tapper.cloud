{"uuid":"8df71300-1138-489b-9f99-539ef7c2dc8f","historyId":"7322e57c46a6c0d55e6f26a09772b9bb","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest]/[method:setScAndCheckTipsWith4thOption()]","testCaseName":"2.0. Проверяем 4 опцию чаевых","fullName":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest.setScAndCheckTipsWith4thOption","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest]/[method:setScAndCheckTipsWith4thOption()]"},{"name":"story","value":"Проверка логики установки дефолтных чаевых от суммы заказа, ввод кастомных чаевых, ошибки суммы"},{"name":"feature","value":"Чаевые"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"},{"name":"testMethod","value":"setScAndCheckTipsWith4thOption"},{"name":"suite","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"}],"links":[],"name":"2.0. Проверяем 4 опцию чаевых","status":"passed","stage":"finished","description":"","steps":[{"name":"Проверяем установку чаевых по умолчанию по сумме, формирование СБ от чаевых, и корректность суммы оплаты в таппере и б2п","status":"passed","stage":"finished","steps":[{"name":"Проверка что логика установленных чаевых по умолчанию от общей суммы корректна","status":"passed","stage":"finished","steps":[{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629213,"stop":1669983629225},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629279,"stop":1669983629290},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629344,"stop":1669983629355},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629412,"stop":1669983629424}],"attachments":[],"parameters":[],"start":1669983629159,"stop":1669983629443}],"attachments":[],"parameters":[],"start":1669983629158,"stop":1669983629495},{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629527,"stop":1669983629537},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629571,"stop":1669983629581},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629613,"stop":1669983629623},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983629655,"stop":1669983629664}],"attachments":[],"parameters":[],"start":1669983629495,"stop":1669983629675},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (8.22\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669983629728,"stop":1669983629739},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"8.22"}],"start":1669983629739,"stop":1669983629739},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"5.475"}],"start":1669983629739,"stop":1669983629740},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.75"}],"start":1669983629740,"stop":1669983629740},{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983629740,"stop":1669983630750},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669983630766,"stop":1669983630775}],"attachments":[],"parameters":[],"start":1669983629740,"stop":1669983630775},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>420 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983630810,"stop":1669983630821},{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983630821,"stop":1669983631823},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983631823,"stop":1669983632829},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-btn main-btn\" type=\"submit\">Оплатить</button>"}],"start":1669983632863,"stop":1669983632909}],"attachments":[],"parameters":[],"start":1669983631823,"stop":1669983632909},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (6сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"vLightPreloader\"></div>"},{"name":"time","value":"6"}],"start":1669983632944,"stop":1669983632956}],"attachments":[],"parameters":[],"start":1669983632909,"stop":1669983632956},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1669983632963,"stop":1669983634638}],"attachments":[],"parameters":[],"start":1669983632963,"stop":1669983634638},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"container\">Оплата заказа\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n420\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1669983634700,"stop":1669983634714},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983634714,"stop":1669983634726}],"attachments":[],"parameters":[],"start":1669983634638,"stop":1669983634726}],"attachments":[],"parameters":[],"start":1669983630821,"stop":1669983634726},{"name":"Забрать итоговую сумму для оплаты со страницы транзакции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">420</div>"},{"name":"regex","value":"\\s"}],"start":1669983634761,"stop":1669983634771}],"attachments":[],"parameters":[],"start":1669983634726,"stop":1669983634771},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983635081,"stop":1669983635093},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check__totalPay-heading+span\"}"},{"name":"regex","value":"\\s₽"}],"start":1669983635103,"stop":1669983635807},{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983635808,"stop":1669983636814},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983636814,"stop":1669983637831},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-btn main-btn\" type=\"submit\">Оплатить</button>"}],"start":1669983637872,"stop":1669983637936}],"attachments":[],"parameters":[],"start":1669983636814,"stop":1669983637936},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (6сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"vLightPreloader\"></div>"},{"name":"time","value":"6"}],"start":1669983637975,"stop":1669983637988}],"attachments":[],"parameters":[],"start":1669983637936,"stop":1669983637988},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1669983637996,"stop":1669983639359}],"attachments":[],"parameters":[],"start":1669983637996,"stop":1669983639359},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"container\">Оплата заказа\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n428.22\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1669983639417,"stop":1669983639431},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983639431,"stop":1669983639443}],"attachments":[],"parameters":[],"start":1669983639359,"stop":1669983639443}],"attachments":[],"parameters":[],"start":1669983635808,"stop":1669983639443},{"name":"Забрать итоговую сумму для оплаты со страницы транзакции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">428.22</div>"},{"name":"regex","value":"\\s"}],"start":1669983639481,"stop":1669983639493}],"attachments":[],"parameters":[],"start":1669983639444,"stop":1669983639493}],"attachments":[],"parameters":[{"name":"tapperTotalPay","value":"0.0"},{"name":"b2pTotalPay","value":"0.0"}],"start":1669983628144,"stop":1669983639791}],"attachments":[],"parameters":[],"start":1669983628144,"stop":1669983639791}