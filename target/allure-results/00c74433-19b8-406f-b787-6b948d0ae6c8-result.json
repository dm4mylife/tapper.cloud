{"uuid":"00c74433-19b8-406f-b787-6b948d0ae6c8","historyId":"9f2b88d6292d39ca4dd580a1195d21b","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_0_VerifiedFullNoCardWithScTest]/[method:checkSumTipsSC()]","testCaseName":"3. Проверка суммы, отсутствия чаевых, корректности сервисного сбора","fullName":"tapper.tests.keeper_e2e._6_waiter._6_0_VerifiedFullNoCardWithScTest.checkSumTipsSC","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_0_VerifiedFullNoCardWithScTest]/[method:checkSumTipsSC()]"},{"name":"feature","value":"Официант"},{"name":"story","value":"Официант верифицирован, без привязанной карты, полная оплата + СБ"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._6_waiter._6_0_VerifiedFullNoCardWithScTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._6_waiter._6_0_VerifiedFullNoCardWithScTest"},{"name":"testMethod","value":"checkSumTipsSC"},{"name":"suite","value":"tapper.tests.keeper_e2e._6_waiter._6_0_VerifiedFullNoCardWithScTest"}],"links":[],"name":"3. Проверка суммы, отсутствия чаевых, корректности сервисного сбора","status":"passed","stage":"finished","description":"","steps":[{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985502950,"stop":1669985502963},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503016,"stop":1669985503027},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503080,"stop":1669985503092},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503145,"stop":1669985503155},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503209,"stop":1669985503218},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503273,"stop":1669985503283},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503338,"stop":1669985503348},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503401,"stop":1669985503410},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503464,"stop":1669985503474},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985503525,"stop":1669985503535}],"attachments":[],"parameters":[],"start":1669985502901,"stop":1669985503551},{"name":"Официант верифицирован, но без карты. Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', чаевые отключены, СБ считается по формуле корректно и включено","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985503551,"stop":1669985503558},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985503558,"stop":1669985504562},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (23.25\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669985504618,"stop":1669985504629},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"23.25"}],"start":1669985504629,"stop":1669985504629}],"attachments":[],"parameters":[],"start":1669985503558,"stop":1669985504629},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"},{"name":"currentTips","value":"0.0"},{"name":"currentSC","value":"23.25"}],"start":1669985504629,"stop":1669985504629},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>1573.25 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985504663,"stop":1669985504672},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span>1573.25 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985504707,"stop":1669985504715}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985503551,"stop":1669985504715},{"name":"Чаевые не должны отображаться у верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985504750,"stop":1669985504760},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips__waiter\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985504798,"stop":1669985504808},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check .check__tips .check__tips-sum\"}"}],"start":1669985504815,"stop":1669985504819},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".custom-input input\"}"}],"start":1669985504823,"stop":1669985504827},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@class='tips__list-item active']\"}"}],"start":1669985504834,"stop":1669985504839},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips__sum-btn[type='reset']\"}"}],"start":1669985504845,"stop":1669985504849}],"attachments":[],"parameters":[],"start":1669985504715,"stop":1669985504856},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985504856,"stop":1669985504866}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985504856,"stop":1669985504873}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985503551,"stop":1669985504873},{"name":"Чаевые не должны отображаться у верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985504897,"stop":1669985504907},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips__waiter\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985504932,"stop":1669985504943},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check .check__tips .check__tips-sum\"}"}],"start":1669985504947,"stop":1669985504950},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".custom-input input\"}"}],"start":1669985504954,"stop":1669985504959},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@class='tips__list-item active']\"}"}],"start":1669985504963,"stop":1669985504967},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips__sum-btn[type='reset']\"}"}],"start":1669985504972,"stop":1669985504976}],"attachments":[],"parameters":[],"start":1669985504873,"stop":1669985504980},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985504981,"stop":1669985504993}],"attachments":[],"parameters":[],"start":1669985502901,"stop":1669985504994}