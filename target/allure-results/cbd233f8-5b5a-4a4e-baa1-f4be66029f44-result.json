{"uuid":"cbd233f8-5b5a-4a4e-baa1-f4be66029f44","historyId":"a97874d5cfa45b5dd5bd55c42cf42ac2","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_1_VerifiedFullNoCardNoScTest]/[method:checkSumTipsSC()]","testCaseName":"3. Проверка суммы, отсутствия чаевых, корректности сервисного сбора","fullName":"tapper.tests.keeper_e2e._6_waiter._6_1_VerifiedFullNoCardNoScTest.checkSumTipsSC","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_1_VerifiedFullNoCardNoScTest]/[method:checkSumTipsSC()]"},{"name":"feature","value":"Официант"},{"name":"story","value":"Официант верифицирован, без привязанной карты, полная оплата -СБ"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._6_waiter._6_1_VerifiedFullNoCardNoScTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._6_waiter._6_1_VerifiedFullNoCardNoScTest"},{"name":"testMethod","value":"checkSumTipsSC"},{"name":"suite","value":"tapper.tests.keeper_e2e._6_waiter._6_1_VerifiedFullNoCardNoScTest"}],"links":[],"name":"3. Проверка суммы, отсутствия чаевых, корректности сервисного сбора","status":"passed","stage":"finished","description":"","steps":[{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985562635,"stop":1669985562645},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985562703,"stop":1669985562713},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985562768,"stop":1669985562779},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985562833,"stop":1669985562843},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985562897,"stop":1669985562907},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985562964,"stop":1669985562976},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985563031,"stop":1669985563041},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985563094,"stop":1669985563105},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985563159,"stop":1669985563168},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985563220,"stop":1669985563231}],"attachments":[],"parameters":[],"start":1669985562582,"stop":1669985563249},{"name":"Официант верифицирован, но без карты. Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', чаевые отключены, СБ считается по формуле корректно и включено","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985563249,"stop":1669985563257},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985563257,"stop":1669985564274},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (23.25\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669985564325,"stop":1669985564335},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"23.25"}],"start":1669985564335,"stop":1669985564335}],"attachments":[],"parameters":[],"start":1669985563257,"stop":1669985564335},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"},{"name":"currentTips","value":"0.0"},{"name":"currentSC","value":"23.25"}],"start":1669985564335,"stop":1669985564335},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>1573.25 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985564369,"stop":1669985564379},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span>1573.25 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985564415,"stop":1669985564426}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985563249,"stop":1669985564426},{"name":"Чаевые не должны отображаться у верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985564466,"stop":1669985564477},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips__waiter\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985564517,"stop":1669985564526},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check .check__tips .check__tips-sum\"}"}],"start":1669985564533,"stop":1669985564537},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".custom-input input\"}"}],"start":1669985564541,"stop":1669985564545},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@class='tips__list-item active']\"}"}],"start":1669985564553,"stop":1669985564557},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips__sum-btn[type='reset']\"}"}],"start":1669985564564,"stop":1669985564568}],"attachments":[],"parameters":[],"start":1669985564426,"stop":1669985564575},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985564575,"stop":1669985564585}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985564575,"stop":1669985564592}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985563249,"stop":1669985564592},{"name":"Чаевые не должны отображаться у верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985564616,"stop":1669985564626},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"tips__waiter\" data-v-77de8664>Официант\nTerminator</div>"}],"start":1669985564652,"stop":1669985564663},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check .check__tips .check__tips-sum\"}"}],"start":1669985564667,"stop":1669985564671},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".custom-input input\"}"}],"start":1669985564676,"stop":1669985564680},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@class='tips__list-item active']\"}"}],"start":1669985564684,"stop":1669985564688},{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips__sum-btn[type='reset']\"}"}],"start":1669985564692,"stop":1669985564696}],"attachments":[],"parameters":[],"start":1669985564592,"stop":1669985564700},{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985564700,"stop":1669985565709},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669985565719,"stop":1669985565732}],"attachments":[],"parameters":[],"start":1669985564700,"stop":1669985565732}],"attachments":[],"parameters":[],"start":1669985562582,"stop":1669985565732}