{"uuid":"4dc70f19-1305-457f-8903-3b79b4fcd30c","historyId":"688ca545875e83e9e861714c814ba31c","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:chooseDishesAndCheckAfterDivided()]","testCaseName":"1.2. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","fullName":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.chooseDishesAndCheckAfterDivided","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:chooseDishesAndCheckAfterDivided()]"},{"name":"feature","value":"Полная оплата"},{"name":"story","value":"Комплекс оплат для проверки на странице истории операций в админке"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"2344@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(17)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testMethod","value":"chooseDishesAndCheckAfterDivided"},{"name":"suite","value":"Частичная и полная оплата с кастомными чаевыми, обычные позиции"}],"links":[],"name":"1.2. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","status":"passed","stage":"finished","description":"","steps":[{"name":"Выбираем рандомное число блюд (1), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (1000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"1000"}],"start":1671606248780,"stop":1671606249782},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"},{"name":"time","value":"5"}],"start":1671606249837,"stop":1671606249853},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"}],"start":1671606249895,"stop":1671606249962}],"attachments":[],"parameters":[],"start":1671606248780,"stop":1671606249962},{"name":"Выбираем определенное число блюд и считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606249962,"stop":1671606249968},{"name":"Генерация рандомного значения от 1 до 10","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"10"}],"start":1671606249994,"stop":1671606249995},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671606250066,"stop":1671606250084},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"orderItem__name\" data-v-b41d8f6a>Барное пиво</div>"}],"start":1671606250146,"stop":1671606250199},{"name":"Принудительно раскрываем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606250467,"stop":1671606250472}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"1"}],"start":1671606249962,"stop":1671606250472},{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671606250667,"stop":1671606250671},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671606250733,"stop":1671606250749}],"attachments":[],"parameters":[],"start":1671606250472,"stop":1671606250749},{"name":"Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', все опции чаевых корректны с\\без СБ, СБ считается по формуле корректно","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>49 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671606250827,"stop":1671606250843}],"attachments":[],"parameters":[],"start":1671606250749,"stop":1671606250843},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606250843,"stop":1671606251869},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (4.78₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671606251935,"stop":1671606251952},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"4.78"}],"start":1671606251952,"stop":1671606251952}],"attachments":[],"parameters":[],"start":1671606250843,"stop":1671606251953},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"},{"name":"currentTips","value":"49.0"},{"name":"currentSC","value":"4.78"}],"start":1671606251953,"stop":1671606251953},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>208.78 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671606252001,"stop":1671606252002},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>208.78 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671606252052,"stop":1671606252072}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671606250749,"stop":1671606252072},{"name":"Проверяем все варианты чаевых с общей суммой с сб","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"waiterTipsPercent\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"}],"start":1671606252119,"stop":1671606252170},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671606252230,"stop":1671606252246},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"waiterTipsPercent active\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"},{"name":"regex","value":"\\D+"}],"start":1671606252272,"stop":1671606252286},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671606252319,"stop":1671606252319},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>157.33 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671606252365,"stop":1671606252371},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606252371,"stop":1671606253387},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671606253419,"stop":1671606253434},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.33"}],"start":1671606253434,"stop":1671606253434}],"attachments":[],"parameters":[],"start":1671606252371,"stop":1671606253434}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671606252072,"stop":1671606253434},{"name":"Проверяем все варианты чаевых с общей суммой без сб","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606253434,"stop":1671606254449},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671606254487,"stop":1671606254559}],"attachments":[],"parameters":[],"start":1671606253434,"stop":1671606254559}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671606253434,"stop":1671606254564},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606254578,"stop":1671606255592},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671606255623,"stop":1671606255663}],"attachments":[],"parameters":[],"start":1671606254564,"stop":1671606255663}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671606254564,"stop":1671606255668}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671606250749,"stop":1671606255668}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1671606248780,"stop":1671606255668},{"name":"Включаем рандомные чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606255668,"stop":1671606256687},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"baseButtonClose\" data-v-5074aea5 data-v-b7b59af2 type=\"button\"></button>"}],"start":1671606256718,"stop":1671606256771}],"attachments":[],"parameters":[],"start":1671606255668,"stop":1671606256776},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671606256776,"stop":1671606256788}],"attachments":[],"parameters":[],"start":1671606255668,"stop":1671606256788},{"name":"Генерация рандомного значения от 100 до 1000","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"100"},{"name":"max","value":"1000"}],"start":1671606256788,"stop":1671606256788},{"name":"Ввод кастомных чаевых","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"155\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"}],"start":1671606256877,"stop":1671606256923},{"name":"Ввод данных 195 с задержкой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"155\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"},{"name":"text","value":"195"}],"start":1671606256989,"stop":1671606257209}],"attachments":[],"parameters":[{"name":"value","value":"195"}],"start":1671606256788,"stop":1671606257237}],"attachments":[],"parameters":[],"start":1671606248779,"stop":1671606257237}