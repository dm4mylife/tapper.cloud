{"uuid":"07c3625b-e659-4c8f-86e4-15f111f62c08","historyId":"67495880b85777448a777e41ad5c999c","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:openAndCheck()]","testCaseName":"2. Открытие стола, проверка что позиции на кассе совпадают с позициями в таппере","fullName":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.openAndCheck","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:openAndCheck()]"},{"name":"feature","value":"Полная оплата"},{"name":"story","value":"Комплекс оплат для проверки на странице истории операций в админке"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"5008@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(17)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testMethod","value":"openAndCheck"},{"name":"suite","value":"Комплекс оплат для проверки на странице истории операций в админке"}],"links":[],"name":"2. Открытие стола, проверка что позиции на кассе совпадают с позициями в таппере","status":"failed","statusDetails":{"known":false,"muted":false,"flaky":false,"message":"Суммы в таппере не сходятся с транзакцией b2p ==> expected: <{order_amount=15500, fee=3277, tips=60900}> but was: <{order_amount=15499, fee=3277, tips=60900}>","trace":"org.opentest4j.AssertionFailedError: Суммы в таппере не сходятся с транзакцией b2p ==> expected: <{order_amount=15500, fee=3277, tips=60900}> but was: <{order_amount=15499, fee=3277, tips=60900}>\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\r\n\tat org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1152)\r\n\tat tapper_table.nestedTestsManager.ReviewPageNestedTests.getTransactionAndMatchSums(ReviewPageNestedTests.java:83)\r\n\tat tapper_table.nestedTestsManager.NestedTests.checkPaymentAndB2pTransaction(NestedTests.java:46)\r\n\tat tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.openAndCheck(_0_8_OperationsHistoryTest.java:85)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat java.base/java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:194)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:295)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1016)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1665)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1598)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)\r\n"},"stage":"finished","description":"","steps":[{"name":"Переход на страницу https://prop-ssr.zedform.ru/testrkeeper/1000046 и ждём принудительно пока не прогрузятся все скрипты\\элементы\\сокет","status":"passed","stage":"finished","steps":[{"name":"Открытие страницы https://prop-ssr.zedform.ru/testrkeeper/1000046","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://prop-ssr.zedform.ru/testrkeeper/1000046"}],"start":1671601421759,"stop":1671601427947},{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (1000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"1000"}],"start":1671601427949,"stop":1671601428960}],"attachments":[],"parameters":[{"name":"url","value":"https://prop-ssr.zedform.ru/testrkeeper/1000046"}],"start":1671601421759,"stop":1671601428960},{"name":"Проверка что позиции в заказе на кассе и в таппере одинаковы","status":"passed","stage":"finished","steps":[{"name":"Меню корректно отображается","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (30сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<ul class=\"orderList\" data-v-c235ec72>Барное пиво\n155\n₽\nОплачено\nБарное пиво\n155\n₽\nОплачено\nБарное пиво\n155\n₽\nБарное пиво\n155\n₽\nБарное пиво\n155\n₽\nБарное пиво\n155\n₽\nБарное пиво\n155\n₽\nБарное пиво\n155\n₽</ul>"},{"name":"time","value":"30"}],"start":1671601429211,"stop":1671601429239}],"attachments":[],"parameters":[],"start":1671601428961,"stop":1671601429239}],"attachments":[],"parameters":[],"start":1671601428961,"stop":1671601429239},{"name":"Выбираем рандомное число блюд (1), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (1000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"1000"}],"start":1671601429239,"stop":1671601430251},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"},{"name":"time","value":"5"}],"start":1671601430299,"stop":1671601430315},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"}],"start":1671601430356,"stop":1671601430426}],"attachments":[],"parameters":[],"start":1671601429239,"stop":1671601430426},{"name":"Выбираем определенное число блюд и считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601430426,"stop":1671601430432},{"name":"Генерация рандомного значения от 1 до 6","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"6"}],"start":1671601430462,"stop":1671601430462},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671601430548,"stop":1671601430570},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"orderItem__name\" data-v-b41d8f6a>Барное пиво</div>"}],"start":1671601430648,"stop":1671601430705},{"name":"Принудительно раскрываем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601430984,"stop":1671601430991}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"1"}],"start":1671601430426,"stop":1671601430991},{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671601431141,"stop":1671601431141},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601431229,"stop":1671601431245}],"attachments":[],"parameters":[],"start":1671601430992,"stop":1671601431251},{"name":"Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', все опции чаевых корректны с\\без СБ, СБ считается по формуле корректно","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>49 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601431331,"stop":1671601431351}],"attachments":[],"parameters":[],"start":1671601431252,"stop":1671601431351},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601431351,"stop":1671601432368},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (4.78₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671601432427,"stop":1671601432442},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"4.78"}],"start":1671601432442,"stop":1671601432442}],"attachments":[],"parameters":[],"start":1671601431351,"stop":1671601432442},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"},{"name":"currentTips","value":"49.0"},{"name":"currentSC","value":"4.78"}],"start":1671601432442,"stop":1671601432442},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>208.78 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601432496,"stop":1671601432514},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>208.78 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671601432565,"stop":1671601432582}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671601431252,"stop":1671601432582},{"name":"Проверяем все варианты чаевых с общей суммой с сб","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"waiterTipsPercent\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"}],"start":1671601432631,"stop":1671601432678},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601432736,"stop":1671601432751},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"waiterTipsPercent active\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"},{"name":"regex","value":"\\D+"}],"start":1671601432779,"stop":1671601432787},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601432818,"stop":1671601432831},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>157.33 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671601432861,"stop":1671601432873},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601432873,"stop":1671601433889},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671601433955,"stop":1671601433969},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.33"}],"start":1671601433969,"stop":1671601433970}],"attachments":[],"parameters":[],"start":1671601432873,"stop":1671601433970}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671601432583,"stop":1671601433970},{"name":"Проверяем все варианты чаевых с общей суммой без сб","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601433970,"stop":1671601434981},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671601435033,"stop":1671601435084}],"attachments":[],"parameters":[],"start":1671601433970,"stop":1671601435084}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671601433970,"stop":1671601435090},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601435103,"stop":1671601436120},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671601436138,"stop":1671601436193}],"attachments":[],"parameters":[],"start":1671601435090,"stop":1671601436193}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671601435090,"stop":1671601436198}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671601431252,"stop":1671601436198}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1671601429239,"stop":1671601436199},{"name":"Включаем рандомные чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601436199,"stop":1671601437204},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"baseButtonClose\" data-v-5074aea5 data-v-b7b59af2 type=\"button\"></button>"}],"start":1671601437238,"stop":1671601437286}],"attachments":[],"parameters":[],"start":1671601436199,"stop":1671601437291},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601437291,"stop":1671601437303}],"attachments":[],"parameters":[],"start":1671601436199,"stop":1671601437303},{"name":"Генерация рандомного значения от 100 до 1000","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"100"},{"name":"max","value":"1000"}],"start":1671601437303,"stop":1671601437303},{"name":"Ввод кастомных чаевых","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"93\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"}],"start":1671601437388,"stop":1671601437441},{"name":"Ввод данных 609 с задержкой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"93\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"},{"name":"text","value":"609"}],"start":1671601437511,"stop":1671601437777}],"attachments":[],"parameters":[{"name":"value","value":"609"}],"start":1671601437303,"stop":1671601437804},{"name":"Сохранение общей суммы в таппере для передачи в другой тест","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>796.77 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601437835,"stop":1671601437838}],"attachments":[],"parameters":[],"start":1671601437805,"stop":1671601437838},{"name":"Сохранения данных для проверки истории операции в админке","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора строку","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"header__item header__item--gray\" data-v-9d6e9462>Стол 3</div>"},{"name":"regex","value":"Стол "}],"start":1671601437889,"stop":1671601437914},{"name":"Преобразовываем\\вырезаем текст из селектора строку","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderTotal__row\" data-v-2862c362>Чаевые:\n609 ₽</div>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1671601437976,"stop":1671601437989},{"name":"Сбрасываем чаевые и СБ чтобы получить чистую сумму за позиции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (32.77₽)</div>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1671601438039,"stop":1671601438053},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"32.77"}],"start":1671601438053,"stop":1671601438053},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>609 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601438090,"stop":1671601438103},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>796.77 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601438137,"stop":1671601438151}],"attachments":[],"parameters":[],"start":1671601437989,"stop":1671601438151},{"name":"Получить дату в формате dd.MM.yyyy","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"pattern","value":"dd.MM.yyyy"}],"start":1671601438151,"stop":1671601438151}],"attachments":[],"parameters":[],"start":1671601437838,"stop":1671601438151},{"name":"Сохранение всех сумм для проверки что транзакция создалась на b2p","status":"passed","stage":"finished","steps":[{"name":"Сбрасываем чаевые и СБ чтобы получить чистую сумму за позиции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (32.77₽)</div>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1671601438191,"stop":1671601438204},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"32.77"}],"start":1671601438204,"stop":1671601438204},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>609 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601438244,"stop":1671601438259},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>796.77 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671601438288,"stop":1671601438300}],"attachments":[],"parameters":[],"start":1671601438151,"stop":1671601438300},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (32.77₽)</div>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1671601438393,"stop":1671601438406},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"32.77"}],"start":1671601438406,"stop":1671601438406}],"attachments":[],"parameters":[],"start":1671601438151,"stop":1671601438406},{"name":"Переход в эквайринг, ввод данных, оплата и возврат на стол таппер","status":"passed","stage":"finished","steps":[{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601438407,"stop":1671601439418},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601439418,"stop":1671601440423},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"baseButton baseButton--blue undefined\" data-v-7131f0e2 data-v-c235ec72 type=\"button\">Оплатить</button>"}],"start":1671601440466,"stop":1671601440514}],"attachments":[],"parameters":[],"start":1671601439418,"stop":1671601440514},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601440514,"stop":1671601440531},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1671601440541,"stop":1671601442886}],"attachments":[],"parameters":[],"start":1671601440540,"stop":1671601442886},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"form__body form__body--payment\" data-resizetarget=\"body\">Выберите способ оплаты\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n796.77\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1671601442952,"stop":1671601442967},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601442968,"stop":1671601442983}],"attachments":[],"parameters":[],"start":1671601442886,"stop":1671601442983}],"attachments":[],"parameters":[],"start":1671601438406,"stop":1671601442983},{"name":"Проверка общей суммы, способов оплаты, ввод данных","status":"passed","stage":"finished","steps":[{"name":"Проверка что сумма 'Итого к оплате' в таппере сходится с суммой в эквайринге","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">796.77</div>"},{"name":"regex","value":"\\s"}],"start":1671601443041,"stop":1671601443059}],"attachments":[],"parameters":[{"name":"totalPayTapper","value":"796.77"}],"start":1671601442983,"stop":1671601443059},{"name":"Проверка что доступны 3 способа оплаты","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-method__button payment-method__button--card button__active\" id=\"paymentTypeCard\" tabindex=\"0\" type=\"button\">Банковская карта</button>"}],"start":1671601443107,"stop":1671601443122},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"yandexpay payment-method__button payment-method__button--yandexpay white\"></div>"}],"start":1671601443163,"stop":1671601443175},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-method__button payment-method__button--sbp\" id=\"sbpButton\" type=\"button\"></button>"}],"start":1671601443215,"stop":1671601443228}],"attachments":[],"parameters":[],"start":1671601443059,"stop":1671601443228},{"name":"Ввод номера карты","status":"passed","stage":"finished","steps":[{"name":"Ввод данных 4809388886227309 без задержки","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input autocomplete=\"cc-number\" class=\"input__field input__field--pan\" id=\"pan\" maxlength=\"23\" name=\"pan\" placeholder=\"_\" tabindex=\"1\" type=\"tel\" value></input>"},{"name":"text","value":"4809388886227309"}],"start":1671601443271,"stop":1671601443328}],"attachments":[],"parameters":[],"start":1671601443228,"stop":1671601443328},{"name":"Ввод даты истечения карты","status":"passed","stage":"finished","steps":[{"name":"Ввод данных 12 без задержки","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input aria-required=\"true\" autocomplete=\"cc-exp\" class=\"input__field input__field--date\" clear-name=\"true\" id=\"cardDate\" maxlength=\"9\" name=\"date\" placeholder=\"_\" required tabindex=\"2\" type=\"tel\" value></input>"},{"name":"text","value":"12"}],"start":1671601443375,"stop":1671601443401},{"name":"Ввод данных 24 без задержки","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input aria-required=\"true\" autocomplete=\"cc-exp\" class=\"input__field input__field--date\" clear-name=\"true\" id=\"cardDate\" maxlength=\"9\" name=\"date\" placeholder=\"_\" required tabindex=\"2\" type=\"tel\" value=\"12 / \"></input>"},{"name":"text","value":"24"}],"start":1671601443436,"stop":1671601443461}],"attachments":[],"parameters":[],"start":1671601443329,"stop":1671601443461},{"name":"Ввод CVV","status":"passed","stage":"finished","steps":[{"name":"Ввод данных 123 без задержки","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input aria-required=\"true\" autocomplete=\"cc-csc\" class=\"input__field input__field--cvv\" id=\"cvc\" maxlength=\"3\" name=\"cvc\" placeholder=\"_\" required tabindex=\"3\" type=\"tel\"></input>"},{"name":"text","value":"123"}],"start":1671601443516,"stop":1671601443546}],"attachments":[],"parameters":[],"start":1671601443461,"stop":1671601443546},{"name":"Клик по кнопке отправить по email и ввод почты","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"checkbox__body\"></span>"}],"start":1671601443592,"stop":1671601443646},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"input__field input__field--email\" id=\"email\" inputmode=\"email\" name=\"email\" placeholder=\" \" required=\"required\" tabindex=\"4\" type=\"text\"></input>"}],"start":1671601443692,"stop":1671601443710},{"name":"Ввод данных autotests@tapper.cloud без задержки","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"input__field input__field--email\" id=\"email\" inputmode=\"email\" name=\"email\" placeholder=\" \" required=\"required\" tabindex=\"4\" type=\"text\"></input>"},{"name":"text","value":"autotests@tapper.cloud"}],"start":1671601443742,"stop":1671601443794}],"attachments":[],"parameters":[],"start":1671601443546,"stop":1671601443794}],"attachments":[],"parameters":[{"name":"totalPay","value":"796.77"}],"start":1671601442983,"stop":1671601443794},{"name":"Клик по кнопке оплатить","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"button\" id=\"submitButton\" tabindex=\"6\" type=\"submit\">Оплатить</button>"}],"start":1671601443857,"stop":1671601447997}],"attachments":[],"parameters":[],"start":1671601443812,"stop":1671601447997}],"attachments":[],"parameters":[{"name":"totalPay","value":"796.77"}],"start":1671601438406,"stop":1671601447997},{"name":"Проверка всего процесса оплаты, транзакции, ожидание пустого стола","status":"failed","statusDetails":{"known":false,"muted":false,"flaky":false,"message":"Суммы в таппере не сходятся с транзакцией b2p ==> expected: <{order_amount=15500, fee=3277, tips=60900}> but was: <{order_amount=15499, fee=3277, tips=60900}>","trace":"org.opentest4j.AssertionFailedError: Суммы в таппере не сходятся с транзакцией b2p ==> expected: <{order_amount=15500, fee=3277, tips=60900}> but was: <{order_amount=15499, fee=3277, tips=60900}>\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\r\n\tat org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1152)\r\n\tat tapper_table.nestedTestsManager.ReviewPageNestedTests.getTransactionAndMatchSums(ReviewPageNestedTests.java:83)\r\n\tat tapper_table.nestedTestsManager.NestedTests.checkPaymentAndB2pTransaction(NestedTests.java:46)\r\n\tat tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.openAndCheck(_0_8_OperationsHistoryTest.java:85)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat java.base/java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:194)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:295)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1016)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1665)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1598)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)\r\n"},"stage":"finished","steps":[{"name":"Проверка поочередных статусов оплаты c частичной оплатой","status":"passed","stage":"finished","steps":[{"name":"Форма статуса оплаты отображается. Проверки что нет ошибки, статус производится и успешно корректны","status":"passed","stage":"finished","steps":[{"name":"Первичная заставка\\лого\\анимация при открытии страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601447998,"stop":1671601448759},{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"paymentProcess\" data-v-555f3f2e data-v-c235ec72>Производится оплата\nПожалуйста, подождите..</div>"},{"name":"time","value":"10"}],"start":1671601448808,"stop":1671601448824},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<img alt=\"payment\" data-v-555f3f2e src=\"/_nuxt/img/payment_process_gif.329fa04.gif\"></img>"}],"start":1671601448871,"stop":1671601448885},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"paymentProcess__status\" data-v-555f3f2e>Производится оплата</div>"}],"start":1671601448930,"stop":1671601448944},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"paymentProcess__text\" data-v-555f3f2e>Пожалуйста, подождите..</div>"}],"start":1671601448994,"stop":1671601449008},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<img alt=\"payment\" class=\"fade-enter-active fade-enter-to\" data-v-555f3f2e src=\"/_nuxt/img/payment_process_yes.42562b4.png\"></img>"}],"start":1671601452196,"stop":1671601452210}],"attachments":[],"parameters":[],"start":1671601447998,"stop":1671601452210},{"name":"Проверка заголовка статуса и что все элементы отзыва отображаются","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".mainPage .reviewModal\"}"},{"name":"time","value":"10"}],"start":1671601452219,"stop":1671601454785},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"reviewModal__stars-item\" data-v-3c0f22e4></li>"}],"start":1671601454823,"stop":1671601454835},{"name":"Элемент присутствует на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<textarea class=\"reviewModal__comments-textarea\" data-v-3c0f22e4 name=\"review\" placeholder=\"Расскажите подробнее...\" type=\"textarea\"></textarea>"}],"start":1671601454876,"stop":1671601454889},{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"baseButton baseButton--blue undefined\" data-v-3c0f22e4 data-v-7131f0e2 type=\"button\">Готово</button>"},{"name":"time","value":"10"}],"start":1671601454928,"stop":1671601454940}],"attachments":[],"parameters":[],"start":1671601452210,"stop":1671601454940},{"name":"Заголовок соответствует частичной оплате","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671601454941,"stop":1671601454990}],"attachments":[],"parameters":[],"start":1671601447998,"stop":1671601454990},{"name":"Получаем саму транзакцию б2п и сравниваем с суммами которые были при оплате","status":"failed","statusDetails":{"known":false,"muted":false,"flaky":false,"message":"Суммы в таппере не сходятся с транзакцией b2p ==> expected: <{order_amount=15500, fee=3277, tips=60900}> but was: <{order_amount=15499, fee=3277, tips=60900}>","trace":"org.opentest4j.AssertionFailedError: Суммы в таппере не сходятся с транзакцией b2p ==> expected: <{order_amount=15500, fee=3277, tips=60900}> but was: <{order_amount=15499, fee=3277, tips=60900}>\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\r\n\tat org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1152)\r\n\tat tapper_table.nestedTestsManager.ReviewPageNestedTests.getTransactionAndMatchSums(ReviewPageNestedTests.java:83)\r\n\tat tapper_table.nestedTestsManager.NestedTests.checkPaymentAndB2pTransaction(NestedTests.java:46)\r\n\tat tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.openAndCheck(_0_8_OperationsHistoryTest.java:85)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)\r\n\tat java.base/java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:194)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:295)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1016)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1665)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1598)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)\r\n"},"stage":"finished","steps":[{"name":"Получаем транзакцию по оплате в б2п","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"transaction_id","value":"22475"}],"start":1671601454990,"stop":1671601457773},{"name":"Забираем с транзакции только информацию об оплате","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"rs","value":"io.restassured.internal.RestAssuredResponseImpl@7f794b73"}],"start":1671601457773,"stop":1671601457828}],"attachments":[],"parameters":[{"name":"trans_id","value":"22475"},{"name":"paymentData","value":"{order_amount=15499, fee=3277, tips=60900}"}],"start":1671601454990,"stop":1671601457833}],"attachments":[],"parameters":[{"name":"transactionId","value":"22475"},{"name":"paymentDataKeeper","value":"{order_amount=15499, fee=3277, tips=60900}"}],"start":1671601447997,"stop":1671601457833}],"attachments":[{"name":"Screenshot","source":"90b73ada-60db-4db8-ab95-33d0643b7691-attachment.png","type":"image/png"}],"parameters":[],"start":1671601421728,"stop":1671601458021}