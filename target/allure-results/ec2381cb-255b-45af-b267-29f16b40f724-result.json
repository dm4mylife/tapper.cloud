{"uuid":"ec2381cb-255b-45af-b267-29f16b40f724","historyId":"28d7a6e2987e991e1283ffe768f8d578","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest]/[method:setScAndCheckTips()]","testCaseName":"1.4. Проверяем что логика чаевых по сумме корректна к минимальным чаевым","fullName":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest.setScAndCheckTips","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest]/[method:setScAndCheckTips()]"},{"name":"story","value":"Проверка логики установки дефолтных чаевых от суммы заказа, ввод кастомных чаевых, ошибки суммы"},{"name":"feature","value":"Чаевые"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"},{"name":"testMethod","value":"setScAndCheckTips"},{"name":"suite","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"}],"links":[],"name":"1.4. Проверяем что логика чаевых по сумме корректна к минимальным чаевым","status":"passed","stage":"finished","description":"","steps":[{"name":"Проверяем установку чаевых по умолчанию по сумме, формирование СБ от чаевых, и корректность суммы оплаты в таппере и б2п","status":"passed","stage":"finished","steps":[{"name":"Проверка что логика установленных чаевых по умолчанию от общей суммы корректна","status":"passed","stage":"finished","steps":[{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983593035,"stop":1669983593045}],"attachments":[],"parameters":[],"start":1669983592984,"stop":1669983593063}],"attachments":[],"parameters":[],"start":1669983592984,"stop":1669983593157},{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983593194,"stop":1669983593205}],"attachments":[],"parameters":[],"start":1669983593157,"stop":1669983593216},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (4.78\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669983593264,"stop":1669983593274},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"4.78"}],"start":1669983593274,"stop":1669983593274},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.3249999999999997"}],"start":1669983593274,"stop":1669983593275},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.45"}],"start":1669983593275,"stop":1669983593275},{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983593275,"stop":1669983594284},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669983594303,"stop":1669983594314}],"attachments":[],"parameters":[],"start":1669983593275,"stop":1669983594314},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>204 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983594353,"stop":1669983594363},{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983594363,"stop":1669983595376},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983595376,"stop":1669983596389},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-btn main-btn\" type=\"submit\">Оплатить</button>"}],"start":1669983596424,"stop":1669983596472}],"attachments":[],"parameters":[],"start":1669983595376,"stop":1669983596472},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (6сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"vLightPreloader\"></div>"},{"name":"time","value":"6"}],"start":1669983596510,"stop":1669983596521}],"attachments":[],"parameters":[],"start":1669983596472,"stop":1669983596521},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1669983596529,"stop":1669983598262}],"attachments":[],"parameters":[],"start":1669983596529,"stop":1669983598262},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"container\">Оплата заказа\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n204\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1669983598325,"stop":1669983598338},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983598338,"stop":1669983598352}],"attachments":[],"parameters":[],"start":1669983598262,"stop":1669983598352}],"attachments":[],"parameters":[],"start":1669983594363,"stop":1669983598352},{"name":"Забрать итоговую сумму для оплаты со страницы транзакции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">204</div>"},{"name":"regex","value":"\\s"}],"start":1669983598391,"stop":1669983598401}],"attachments":[],"parameters":[],"start":1669983598352,"stop":1669983598401},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983598705,"stop":1669983598716},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check__totalPay-heading+span\"}"},{"name":"regex","value":"\\s₽"}],"start":1669983598728,"stop":1669983599211},{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983599211,"stop":1669983600226},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983600226,"stop":1669983601229},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-btn main-btn\" type=\"submit\">Оплатить</button>"}],"start":1669983601268,"stop":1669983601327}],"attachments":[],"parameters":[],"start":1669983600226,"stop":1669983601327},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (6сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"vLightPreloader\"></div>"},{"name":"time","value":"6"}],"start":1669983601372,"stop":1669983601383}],"attachments":[],"parameters":[],"start":1669983601327,"stop":1669983601383},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1669983601391,"stop":1669983602776}],"attachments":[],"parameters":[],"start":1669983601391,"stop":1669983602776},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"container\">Оплата заказа\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n208.78\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1669983602836,"stop":1669983602851},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983602851,"stop":1669983602862}],"attachments":[],"parameters":[],"start":1669983602776,"stop":1669983602862}],"attachments":[],"parameters":[],"start":1669983599211,"stop":1669983602862},{"name":"Забрать итоговую сумму для оплаты со страницы транзакции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">208.78</div>"},{"name":"regex","value":"\\s"}],"start":1669983602899,"stop":1669983602918}],"attachments":[],"parameters":[],"start":1669983602862,"stop":1669983602918}],"attachments":[],"parameters":[{"name":"tapperTotalPay","value":"0.0"},{"name":"b2pTotalPay","value":"0.0"}],"start":1669983592976,"stop":1669983603245}],"attachments":[],"parameters":[],"start":1669983592976,"stop":1669983603245}