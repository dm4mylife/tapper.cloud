{"uuid":"4a9379bc-e7f9-4f8c-abb5-be8ec45933d3","historyId":"f00a28b22a48431e38c210852b19afaf","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_4_NonVerifiedFullNoCardWithScTest]/[method:checkSumTipsSC()]","testCaseName":"3. Проверка суммы, отсутствия чаевых, корректности сервисного сбора","fullName":"tapper.tests.keeper_e2e._6_waiter._6_4_NonVerifiedFullNoCardWithScTest.checkSumTipsSC","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._6_waiter._6_4_NonVerifiedFullNoCardWithScTest]/[method:checkSumTipsSC()]"},{"name":"feature","value":"Официант"},{"name":"story","value":"Официант не верифицирован, без привязанной карты, полная оплата + СБ"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._6_waiter._6_4_NonVerifiedFullNoCardWithScTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._6_waiter._6_4_NonVerifiedFullNoCardWithScTest"},{"name":"testMethod","value":"checkSumTipsSC"},{"name":"suite","value":"tapper.tests.keeper_e2e._6_waiter._6_4_NonVerifiedFullNoCardWithScTest"}],"links":[],"name":"3. Проверка суммы, отсутствия чаевых, корректности сервисного сбора","status":"passed","stage":"finished","description":"","steps":[{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985754956,"stop":1669985754968},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755026,"stop":1669985755037},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755093,"stop":1669985755108},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755180,"stop":1669985755191},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755249,"stop":1669985755258},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755312,"stop":1669985755322},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755378,"stop":1669985755388},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755441,"stop":1669985755451},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755509,"stop":1669985755519},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985755573,"stop":1669985755584}],"attachments":[],"parameters":[],"start":1669985754900,"stop":1669985755602},{"name":"Официант не верифицирован. Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', чаевые отключены, СБ считается по формуле корректно и включено","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985755602,"stop":1669985755608},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985755608,"stop":1669985756626},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (23.25\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669985756676,"stop":1669985756686},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"23.25"}],"start":1669985756686,"stop":1669985756686}],"attachments":[],"parameters":[],"start":1669985755608,"stop":1669985756686},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"},{"name":"currentTips","value":"0.0"},{"name":"currentSC","value":"23.25"}],"start":1669985756686,"stop":1669985756686},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>1573.25 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985756721,"stop":1669985756732},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span>1573.25 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669985756768,"stop":1669985756778}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985755602,"stop":1669985756778},{"name":"Чаевые не должны отображаться у не верифицированного официанта без привязанной карты","status":"passed","stage":"finished","steps":[{"name":"Элемент не видим на странице","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".tips\"}"}],"start":1669985756785,"stop":1669985756789}],"attachments":[],"parameters":[],"start":1669985756778,"stop":1669985756789},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985756789,"stop":1669985756800}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985756789,"stop":1669985756807}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"1550.0"}],"start":1669985755602,"stop":1669985756807},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669985756807,"stop":1669985756818}],"attachments":[],"parameters":[],"start":1669985754900,"stop":1669985756818}