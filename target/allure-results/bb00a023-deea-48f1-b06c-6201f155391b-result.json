{"uuid":"bb00a023-deea-48f1-b06c-6201f155391b","historyId":"688ca545875e83e9e861714c814ba31c","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:chooseDishesAndCheckAfterDivided()]","testCaseName":"1.2. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","fullName":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest.chooseDishesAndCheckAfterDivided","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest]/[method:chooseDishesAndCheckAfterDivided()]"},{"name":"feature","value":"Полная оплата"},{"name":"story","value":"Комплекс оплат для проверки на странице истории операций в админке"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12008@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(17)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._0_common._0_8_OperationsHistoryTest"},{"name":"testMethod","value":"chooseDishesAndCheckAfterDivided"},{"name":"suite","value":"Частичная и полная оплата с кастомными чаевыми, обычные позиции"}],"links":[],"name":"1.2. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","status":"passed","stage":"finished","description":"","steps":[{"name":"Выбираем рандомное число блюд (1), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (1000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"1000"}],"start":1671605703841,"stop":1671605704843},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"},{"name":"time","value":"5"}],"start":1671605704889,"stop":1671605704889},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"BaseSwitch\" data-v-b0e65b2c data-v-efb05494></div>"}],"start":1671605704936,"stop":1671605705000}],"attachments":[],"parameters":[],"start":1671605703840,"stop":1671605705000},{"name":"Выбираем определенное число блюд и считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605705000,"stop":1671605705005},{"name":"Генерация рандомного значения от 1 до 10","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"10"}],"start":1671605705030,"stop":1671605705030},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671605705102,"stop":1671605705117},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"orderItem__name\" data-v-b41d8f6a>Барное пиво</div>"}],"start":1671605705181,"stop":1671605705234},{"name":"Принудительно раскрываем футер","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605705507,"stop":1671605705512}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"1"}],"start":1671605705000,"stop":1671605705512},{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"orderItem__price\" data-v-b41d8f6a>155\n₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671605705614,"stop":1671605705614},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671605705781,"stop":1671605705797}],"attachments":[],"parameters":[],"start":1671605705512,"stop":1671605705797},{"name":"Проверка что чистая сумма позиций совпадает с общей суммой в 'Итого к оплате', все опции чаевых корректны с\\без СБ, СБ считается по формуле корректно","status":"passed","stage":"finished","steps":[{"name":"Проверяем что общая чистая сумма совпадает с 'Итого к оплате'","status":"passed","stage":"finished","steps":[{"name":"Проверяем что текущие чаевые в поле 'Чаевые' сходятся с чаевыми по центру. Отдаём чаевые","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>49 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671605705880,"stop":1671605705895}],"attachments":[],"parameters":[],"start":1671605705797,"stop":1671605705895},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605705895,"stop":1671605706921},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (4.78₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671605706968,"stop":1671605706984},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"4.78"}],"start":1671605706984,"stop":1671605706984}],"attachments":[],"parameters":[],"start":1671605705895,"stop":1671605706984},{"name":"Считаем общую сумму за все блюда + чаевые + сбор","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"},{"name":"currentTips","value":"49.0"},{"name":"currentSC","value":"4.78"}],"start":1671605706984,"stop":1671605706984},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>208.78 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671605707035,"stop":1671605707050},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>208.78 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671605707082,"stop":1671605707097}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671605705797,"stop":1671605707097},{"name":"Проверяем все варианты чаевых с общей суммой с сб","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"waiterTipsPercent\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"}],"start":1671605707135,"stop":1671605707189},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671605707235,"stop":1671605707251},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"waiterTipsPercent active\" data-v-00ae26c6 data-v-b7b59af2>0%</div>"},{"name":"regex","value":"\\D+"}],"start":1671605707282,"stop":1671605707282},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-2862c362>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1671605707298,"stop":1671605707333},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"appFooter__priceShield undefined\" data-v-41e9baa8>157.33 ₽</div>"},{"name":"regex","value":"\\s₽"}],"start":1671605707364,"stop":1671605707380},{"name":"Забираем сумму сервисного сбора если он включен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605707380,"stop":1671605708387},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"},{"name":"regex","value":"[^\\d\\.\\-]+"}],"start":1671605708434,"stop":1671605708434},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.33"}],"start":1671605708434,"stop":1671605708434}],"attachments":[],"parameters":[],"start":1671605707380,"stop":1671605708434}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671605707097,"stop":1671605708434},{"name":"Проверяем все варианты чаевых с общей суммой без сб","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605708434,"stop":1671605709454},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671605709501,"stop":1671605709560}],"attachments":[],"parameters":[],"start":1671605708434,"stop":1671605709560}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671605708434,"stop":1671605709565},{"name":"Проверяем что сбор формируется корректно по формуле со всеми чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605709579,"stop":1671605710599},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"serviceFee\" data-v-641bdbfc data-v-c235ec72>Я хочу взять на себя сервисный сбор Tapper (2.33₽)</div>"}],"start":1671605710632,"stop":1671605710670}],"attachments":[],"parameters":[],"start":1671605709565,"stop":1671605710671}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671605709565,"stop":1671605710676}],"attachments":[],"parameters":[{"name":"cleanDishesSum","value":"155.0"}],"start":1671605705797,"stop":1671605710676}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1671605703840,"stop":1671605710676},{"name":"Включаем рандомные чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605710676,"stop":1671605711685},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"baseButtonClose\" data-v-5074aea5 data-v-b7b59af2 type=\"button\"></button>"}],"start":1671605711716,"stop":1671605711767}],"attachments":[],"parameters":[],"start":1671605710676,"stop":1671605711772},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1671605711773,"stop":1671605711785}],"attachments":[],"parameters":[],"start":1671605710676,"stop":1671605711785},{"name":"Генерация рандомного значения от 100 до 1000","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"100"},{"name":"max","value":"1000"}],"start":1671605711785,"stop":1671605711785},{"name":"Ввод кастомных чаевых","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"155\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"}],"start":1671605711873,"stop":1671605711922},{"name":"Ввод данных 201 с задержкой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<input class=\"waiter__input\" data-mask=\"######\" data-mask-inited=\"true\" data-mask-raw-value=\"155\" data-v-b7b59af2 placeholder=\"0\" type=\"text\"></input>"},{"name":"text","value":"201"}],"start":1671605711997,"stop":1671605712176}],"attachments":[],"parameters":[{"name":"value","value":"201"}],"start":1671605711786,"stop":1671605712205}],"attachments":[],"parameters":[],"start":1671605703840,"stop":1671605712205}