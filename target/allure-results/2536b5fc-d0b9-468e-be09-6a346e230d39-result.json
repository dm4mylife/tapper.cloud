{"uuid":"2536b5fc-d0b9-468e-be09-6a346e230d39","historyId":"998584e83551c56f7fc64c88b6562fd7","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.e2e._2_6_DivideCheckAndPartPayTest]/[method:chooseDishesAndCheckAfterDivided()]","testCaseName":"3. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","fullName":"tapper.tests.e2e._2_6_DivideCheckAndPartPayTest.chooseDishesAndCheckAfterDivided","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.e2e._2_6_DivideCheckAndPartPayTest]/[method:chooseDishesAndCheckAfterDivided()]"},{"name":"feature","value":"keeper - частичная оплата когда разделили счёт - обычные позиции - чай+сбор"},{"name":"epic","value":"E2E - тесты (полные)"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"2108@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.e2e._2_6_DivideCheckAndPartPayTest"},{"name":"testClass","value":"tapper.tests.e2e._2_6_DivideCheckAndPartPayTest"},{"name":"testMethod","value":"chooseDishesAndCheckAfterDivided"},{"name":"suite","value":"keeper - частичная оплата когда разделили счёт - обычные позиции - чай+сбор"}],"links":[],"name":"3. Выбираем рандомно блюда, проверяем все суммы и условия, проверяем что после шаринга выбранные позиции в ожидаются","status":"passed","stage":"finished","description":"","steps":[{"name":"Выбираем рандомное число блюд (1), проверяем сумму, проводим все проверки с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Выбираем рандомное число блюд (1) и считаем их сумму","status":"passed","stage":"finished","steps":[{"name":"Переключаем на разделение счёта, ждём что все статусы прогружены у позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительное ожидание из-за долгой загрузки страницы,элементов,скриптов (2000 мс)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"ms","value":"2000"}],"start":1669370009189,"stop":1669370011195},{"name":"Элемент присутствует на странице в ходе длительной загрузки (5сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"slider\" data-v-63689a2c></span>"},{"name":"time","value":"5"}],"start":1669370011228,"stop":1669370011238},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<span class=\"slider\" data-v-63689a2c></span>"}],"start":1669370011260,"stop":1669370011317}],"attachments":[],"parameters":[],"start":1669370009189,"stop":1669370011317},{"name":"Считаем сумму выбранных рандомных позиций","status":"passed","stage":"finished","steps":[{"name":"Принудительно прячем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370011318,"stop":1669370011321},{"name":"Генерация рандомного значения от 1 до 3","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"min","value":"1"},{"name":"max","value":"3"}],"start":1669370011333,"stop":1669370011333},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-a7c79330>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370011382,"stop":1669370011392},{"name":"Скрол до элемента и клик по нему","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"dish__checkbox-content\" data-v-a7c79330>Барное пиво</div>"}],"start":1669370011440,"stop":1669370011485},{"name":"Принудительно раскрываем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370011741,"stop":1669370011743}],"attachments":[],"parameters":[{"name":"neededDishesAmount","value":"1"}],"start":1669370011318,"stop":1669370011743}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1669370009189,"stop":1669370011743},{"name":"Проверяем сумму выбранных позиций заказа с разделенными позициями с чаевыми и СБ","status":"passed","stage":"finished","steps":[{"name":"Считаем сумму всех выбранных позиций в заказе при разделении","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-a7c79330>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370011789,"stop":1669370011797},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-10c83070>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370011872,"stop":1669370011882}],"attachments":[],"parameters":[],"start":1669370011744,"stop":1669370011883},{"name":"Проверяем сумму за сами блюда с 'Итого к оплате' и счётчиком в иконке кошелька без СБ и чаевых","status":"passed","stage":"finished","steps":[{"name":"Отключаем чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370011883,"stop":1669370012899},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669370012917,"stop":1669370012924}],"attachments":[],"parameters":[],"start":1669370011883,"stop":1669370012924},{"name":"Выставляем чаевые на 0, проверяем что чаевые не участвуют в общей сумме и СБ","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370012931,"stop":1669370013943},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"tips__list-item\" data-v-695bfeae>0%</li>"}],"start":1669370013976,"stop":1669370014021},{"name":"Проверка логики суммы сервисного сбора с общей суммой и чаевыми","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370014055,"stop":1669370015058},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669370015058,"stop":1669370015064}],"attachments":[],"parameters":[],"start":1669370014044,"stop":1669370015064},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.3249999999999997"}],"start":1669370015073,"stop":1669370015073},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"0.0"}],"start":1669370015091,"stop":1669370015091},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.32"}],"start":1669370015091,"stop":1669370015091},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-10c83070>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015125,"stop":1669370015134},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015171,"stop":1669370015181},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper(2.325\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669370015213,"stop":1669370015223},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.325"}],"start":1669370015223,"stop":1669370015223},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.3249999999999997"}],"start":1669370015223,"stop":1669370015223}],"attachments":[],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1669370014034,"stop":1669370015223},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<li class=\"tips__list-item active\" data-v-695bfeae>0%</li>"},{"name":"regex","value":"\\D+"}],"start":1669370015246,"stop":1669370015255},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-10c83070>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015288,"stop":1669370015297},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-10c83070>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015330,"stop":1669370015339},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015360,"stop":1669370015370}],"attachments":[],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1669370012924,"stop":1669370015370}],"attachments":[],"parameters":[{"name":"cleanTotalSum","value":"155.0"}],"start":1669370011883,"stop":1669370015370},{"name":"Проверяем что сумма всех блюд совпадает с итоговой без чаевых и СБ","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (2сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<span data-v-10c83070>157.33 ₽</span>"},{"name":"time","value":"2"}],"start":1669370015392,"stop":1669370015403},{"name":"Сбрасываем чаевые и СБ чтобы получить чистую сумму за позиции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper(2.325\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669370015434,"stop":1669370015443},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.325"}],"start":1669370015443,"stop":1669370015443},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-10c83070>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015471,"stop":1669370015480},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-10c83070>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370015502,"stop":1669370015511}],"attachments":[],"parameters":[],"start":1669370015403,"stop":1669370015511}],"attachments":[],"parameters":[{"name":"totalSumByDishesInOrder","value":"155.0"}],"start":1669370015370,"stop":1669370015511},{"name":"Проверяем что сумма 'Итого к оплате' совпадает с суммой счетчика в иконке кошелька","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370015511,"stop":1669370015517},{"name":"Включаем рандомные чаевые и сервисный сбор","status":"passed","stage":"finished","steps":[{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370015517,"stop":1669370015527},{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"tips__sum-btn\" data-v-695bfeae type=\"reset\"></button>"}],"start":1669370015559,"stop":1669370015602}],"attachments":[],"parameters":[],"start":1669370015527,"stop":1669370015608}],"attachments":[],"parameters":[],"start":1669370015517,"stop":1669370015608}],"attachments":[],"parameters":[{"name":"cleanTotalSum","value":"155.0"}],"start":1669370011883,"stop":1669370015608},{"name":"Проверяем что все варианты чаевых корректны","status":"passed","stage":"finished","steps":[{"name":"Проверяем что процент установленных по умолчанию чаевых рассчитывается корректно с СБ и без","status":"passed","stage":"finished","steps":[{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370015615,"stop":1669370016630},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669370016642,"stop":1669370016648}],"attachments":[],"parameters":[],"start":1669370015615,"stop":1669370016648},{"name":"Элемент присутствует на странице в ходе длительной загрузки (15сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"tips__list-item active\" data-v-695bfeae>0%</li>"},{"name":"time","value":"15"}],"start":1669370016674,"stop":1669370016684},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<li class=\"tips__list-item active\" data-v-695bfeae>0%</li>"},{"name":"regex","value":"\\D+"}],"start":1669370016707,"stop":1669370016716},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-10c83070>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370016739,"stop":1669370016748}],"attachments":[],"parameters":[{"name":"totalSumWithoutTips","value":"155.0"}],"start":1669370015608,"stop":1669370016748},{"name":"Проверяем что разные проценты чаевых рассчитываются корректно во всех полях и в суммах вместе с СБ не разделяя счёт","status":"passed","stage":"finished","steps":[{"name":"Прощёлкиваем все чаевые и проверяем что суммы корректны и сходятся. Добавляем лог в аллюр","status":"passed","stage":"finished","steps":[{"name":"Принудительно раскрываем таббар","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370016748,"stop":1669370016750},{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370016751,"stop":1669370017755},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370017775,"stop":1669370018788},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669370018788,"stop":1669370018794}],"attachments":[],"parameters":[],"start":1669370017763,"stop":1669370018794},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<li class=\"tips__list-item active\" data-v-695bfeae>0%</li>"}],"start":1669370018813,"stop":1669370018839},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper(2.325\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669370018868,"stop":1669370018877},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.325"}],"start":1669370018877,"stop":1669370018877},{"name":"Преобразовываем\\вырезаем текст из селектора в число","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<li class=\"tips__list-item active\" data-v-695bfeae>0%</li>"},{"name":"regex","value":"\\D+"}],"start":1669370018896,"stop":1669370018901},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-10c83070>157.33 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370018926,"stop":1669370018938},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"check__tips-sum\" data-v-10c83070>0 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370018965,"stop":1669370018982},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"tips__sum-btn\" data-v-695bfeae type=\"reset\"></button>"}],"start":1669370019018,"stop":1669370019051}],"attachments":[{"name":"Подсчёт сумм","source":"92d6c94b-c608-42ee-ae11-db523e804938-attachment.txt","type":"text/plain"}],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1669370016748,"stop":1669370019052}],"attachments":[],"parameters":[{"name":"totalSum","value":"155.0"}],"start":1669370016748,"stop":1669370019052}],"attachments":[],"parameters":[{"name":"cleanTotalSum","value":"155.0"}],"start":1669370015608,"stop":1669370019052}],"attachments":[],"parameters":[],"start":1669370011743,"stop":1669370019052},{"name":"Устанавливаем рандомные чаевые","status":"passed","stage":"finished","steps":[{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"tips__sum-btn\" data-v-695bfeae type=\"reset\"></button>"}],"start":1669370019084,"stop":1669370019126}],"attachments":[],"parameters":[],"start":1669370019052,"stop":1669370019131}],"attachments":[],"parameters":[{"name":"amountDishes","value":"1"}],"start":1669370009188,"stop":1669370019131},{"name":"Забираем коллекцию заблокированных позиций в заказе для следующего теста","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-a7c79330>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669370019183,"stop":1669370019193}],"attachments":[],"parameters":[],"start":1669370019131,"stop":1669370019208},{"name":"Очищаем все данные, рефрешим, передаём список ранее выбранных блюд, проверяем что выбранные блюда в статусе ожидаются после разделения чека","status":"passed","stage":"finished","steps":[{"name":"Очищаем локал и куки для разделения чека","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370019208,"stop":1669370019227},{"name":"Меню корректно отображается","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (30сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".dishList ul.dishList__list\"}"},{"name":"time","value":"30"}],"start":1669370019611,"stop":1669370020275}],"attachments":[],"parameters":[],"start":1669370019227,"stop":1669370020275},{"name":"Проверяем что имя и сумма перечеркнуты у заблокированных блюд","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669370020275,"stop":1669370020303},{"name":"Проверяем что блюда, которые выбраны ранее, в статусе 'Ожидается'","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"chosenDishes","value":"{0={Барное пиво=155.0}}"}],"start":1669370020303,"stop":1669370020337}],"attachments":[],"parameters":[{"name":"chosenDishes","value":"{0={Барное пиво=155.0}}"}],"start":1669370019208,"stop":1669370020337}],"attachments":[],"parameters":[],"start":1669370009188,"stop":1669370020338}