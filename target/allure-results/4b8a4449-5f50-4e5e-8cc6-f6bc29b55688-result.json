{"uuid":"4b8a4449-5f50-4e5e-8cc6-f6bc29b55688","historyId":"5275b152a910521b896ebe27a2a593a8","testCaseId":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest]/[method:setScAndCheckTipsWith2ndOption()]","testCaseName":"1.6. Проверяем вторую опцию чаевых","fullName":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest.setScAndCheckTipsWith2ndOption","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest]/[method:setScAndCheckTipsWith2ndOption()]"},{"name":"story","value":"Проверка логики установки дефолтных чаевых от суммы заказа, ввод кастомных чаевых, ошибки суммы"},{"name":"feature","value":"Чаевые"},{"name":"epic","value":"RKeeper"},{"name":"host","value":"WIN-UJN5UBMF8DD"},{"name":"thread","value":"12432@WIN-UJN5UBMF8DD.ForkJoinPool-1-worker-3(18)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"},{"name":"testClass","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"},{"name":"testMethod","value":"setScAndCheckTipsWith2ndOption"},{"name":"suite","value":"tapper.tests.keeper_e2e._3_tips._0_5_CheckDefaultTipsLogicBySumTest"}],"links":[],"name":"1.6. Проверяем вторую опцию чаевых","status":"passed","stage":"finished","description":"","steps":[{"name":"Проверяем установку чаевых по умолчанию по сумме, формирование СБ от чаевых, и корректность суммы оплаты в таппере и б2п","status":"passed","stage":"finished","steps":[{"name":"Проверка что логика установленных чаевых по умолчанию от общей суммы корректна","status":"passed","stage":"finished","steps":[{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983604813,"stop":1669983604823},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983604878,"stop":1669983604889}],"attachments":[],"parameters":[],"start":1669983604760,"stop":1669983604907}],"attachments":[],"parameters":[],"start":1669983604760,"stop":1669983605226},{"name":"Считаем сумму не оплаченных позиций в заказе не разделяя","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>155 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983605260,"stop":1669983605272},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span class=\"sum\" data-v-e5a69182>70 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983605308,"stop":1669983605318}],"attachments":[],"parameters":[],"start":1669983605226,"stop":1669983605327},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<label class=\"payment__conditions\">Я хочу взять на себя сервисный сбор Tapper (6.17\n₽\n)</label>"},{"name":"regex","value":"[^\\d\\.]+"}],"start":1669983605379,"stop":1669983605390},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"6.17"}],"start":1669983605390,"stop":1669983605390},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"3.375"}],"start":1669983605390,"stop":1669983605390},{"name":"Обрезаем у дабла всё до двух чисел после запятой","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"doubleNumber","value":"2.8000000000000003"}],"start":1669983605390,"stop":1669983605390},{"name":"Деактивируем СБ если активен","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983605390,"stop":1669983606405},{"name":"Кнопка видна и клик по ней (JS)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":".payment__conditions:first-of-type"}],"start":1669983606421,"stop":1669983606429}],"attachments":[],"parameters":[],"start":1669983605390,"stop":1669983606429},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<span data-v-c8fe04fa>281 ₽</span>"},{"name":"regex","value":"\\s₽"}],"start":1669983606464,"stop":1669983606474},{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983606474,"stop":1669983607485},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983607485,"stop":1669983608499},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-btn main-btn\" type=\"submit\">Оплатить</button>"}],"start":1669983608534,"stop":1669983608584}],"attachments":[],"parameters":[],"start":1669983607485,"stop":1669983608584},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (6сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"vLightPreloader\"></div>"},{"name":"time","value":"6"}],"start":1669983608619,"stop":1669983608630}],"attachments":[],"parameters":[],"start":1669983608584,"stop":1669983608630},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1669983608639,"stop":1669983610224}],"attachments":[],"parameters":[],"start":1669983608639,"stop":1669983610224},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"container\">Оплата заказа\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n281\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1669983610283,"stop":1669983610298},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983610298,"stop":1669983610310}],"attachments":[],"parameters":[],"start":1669983610224,"stop":1669983610310}],"attachments":[],"parameters":[],"start":1669983606474,"stop":1669983610310},{"name":"Забрать итоговую сумму для оплаты со страницы транзакции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">281</div>"},{"name":"regex","value":"\\s"}],"start":1669983610347,"stop":1669983610357}],"attachments":[],"parameters":[],"start":1669983610311,"stop":1669983610357},{"name":"Активируем СБ если не активен","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983610659,"stop":1669983610675},{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".check__totalPay-heading+span\"}"},{"name":"regex","value":"\\s₽"}],"start":1669983610684,"stop":1669983611165},{"name":"Клик в оплату, появление лоадера и проверка что мы на эквайринге","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983611165,"stop":1669983612174},{"name":"Клик по кнопке оплаты","status":"passed","stage":"finished","steps":[{"name":"Плавный скрол до самого низа страницы","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983612174,"stop":1669983613186},{"name":"Кнопка видна и клик по ней","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<button class=\"payment-btn main-btn\" type=\"submit\">Оплатить</button>"}],"start":1669983613225,"stop":1669983613284}],"attachments":[],"parameters":[],"start":1669983612174,"stop":1669983613284},{"name":"Отображается лоадер на странице","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (6сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"vLightPreloader\"></div>"},{"name":"time","value":"6"}],"start":1669983613321,"stop":1669983613332}],"attachments":[],"parameters":[],"start":1669983613284,"stop":1669983613332},{"name":"Проверка что мы находимся на странице эквайринга","status":"passed","stage":"finished","steps":[{"name":"Проверка что текст {text} содержится в текущем URL","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"url","value":"https://test.best2pay.net/"}],"start":1669983613340,"stop":1669983615052}],"attachments":[],"parameters":[],"start":1669983613340,"stop":1669983615052},{"name":"Проверка попапа ВПН и что форма оплаты появилась","status":"passed","stage":"finished","steps":[{"name":"Элемент присутствует на странице в ходе длительной загрузки (10сек.)","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<div class=\"container\">Оплата заказа\nБанковская карта\nНомер карты\nСрок действия\nCVV\nОтправить чек\nСумма к оплате\n287.17\nОплатить\nНажимая на кнопку «Оплатить», вы соглашаетесь с условиями оферты</div>"},{"name":"time","value":"10"}],"start":1669983615114,"stop":1669983615128},{"name":"Проверка попапа ВПН","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1669983615128,"stop":1669983615142}],"attachments":[],"parameters":[],"start":1669983615052,"stop":1669983615142}],"attachments":[],"parameters":[],"start":1669983611165,"stop":1669983615142},{"name":"Забрать итоговую сумму для оплаты со страницы транзакции","status":"passed","stage":"finished","steps":[{"name":"Преобразовываем\\вырезаем текст из селектора в дабл","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"selector","value":"<div class=\"form__amount-value\" id=\"totalAmountValue\">287.17</div>"},{"name":"regex","value":"\\s"}],"start":1669983615179,"stop":1669983615189}],"attachments":[],"parameters":[],"start":1669983615142,"stop":1669983615189}],"attachments":[],"parameters":[{"name":"tapperTotalPay","value":"0.0"},{"name":"b2pTotalPay","value":"0.0"}],"start":1669983603746,"stop":1669983615496}],"attachments":[],"parameters":[],"start":1669983603745,"stop":1669983615496}